//v1.0.0.
const FetchServices={async request(url,method="GET",data=null,alert=true,responseType="json",contentType="application/json; charset=utf-8"){try{const options={method,headers:{"Content-Type":contentType}};data&&(options.body=contentType.includes("json")?JSON.stringify(data):new URLSearchParams(data));const response=await fetch(url,options);if(response.status===403)return alert&&AlertServices.error(AppConfig.forbidenMessage),null;if(!response.ok){alert&&AlertServices.error(`خطای سرور: ${response.status}`);throw new Error(`Server error: ${response.status}`);}return responseType==="json"?response.json():response.text()}catch(error){alert&&AlertServices.error(AppConfig.failMessage);throw error;}},post_json(url,data,alert=true){return this.request(url,"POST",data,alert,"json")},get_json(url,alert=true){return this.request(url,"GET",null,alert,"json")},put_json(url,data,alert=true){return this.request(url,"PUT",data,alert,"json")},delete_json(url,alert=true){return this.request(url,"DELETE",null,alert,"json")},post_html(url,data,alert=true){return this.request(url,"POST",data,alert,"text")},get_html(url,alert=true){return this.request(url,"GET",null,alert,"text")},put_html(url,data,alert=true){return this.request(url,"PUT",data,alert,"text")},delete_html(url,alert=true){return this.request(url,"DELETE",null,alert,"text")},post_html_form(url,data,alert=true){return this.request(url,"POST",data,alert,"text","application/x-www-form-urlencoded")},get_html_form(url,alert=true){return this.request(url,"GET",null,alert,"text","application/x-www-form-urlencoded")}},AlertServices={base:function(type,message){new Noty({text:message,type:type,theme:"limitless",layout:"topRight",timeout:2500}).show()},error:function(message){this.base("error",message)},success:function(message){this.base("success",message)},warning:function(message){this.base("warning",message)},info:function(message){this.base("info",message)}};console.log($.fn.select2);const Select2Services={ajax:function(selector,url,minimumInputLength=1){$(selector).select2({ajax:{url:url,dataType:"json",delay:250,data:function(params){return{q:params.term,page:params.page||1}},processResults:function(data){return console.log(data),{results:data.items,pagination:{more:data.more}}},cache:!0},minimumInputLength:minimumInputLength,placeholder:"Search...",allowClear:!0})},base:function(selector,options){$(selector).select2(options)},noSearch:function(selector){$(selector).select2({width:"100%",minimumResultsForSearch:Infinity})},icon:function(selector){$(selector).select2({placeholder:"Select one choice",width:"100%",templateResult:this.iconFormat,minimumResultsForSearch:Infinity,templateSelection:this.iconFormat,escapeMarkup:function(m){return m}})},iconFormat:function(icon){var originalOption=icon.element;return icon.id?'<i class="ph-'+$(icon.element).data("icon")+" "+$(icon.element).data("color")+'"><\/i>'+icon.text:icon.text}},CKEditorServices={initBasic:function(selector){return selector?new Promise((resolve,reject)=>{ClassicEditor.create(document.querySelector(selector),{language:{ui:window.language,content:window.language},toolbar:["bold","italic","underline","fontColor","highlight","|","bulletedList","numberedList","|","heading",]}).then(editor=>{resolve(editor)}).catch(error=>{console.error("CKEditor initialization error:",error),reject(error)})}):(console.error("CKEditor selector is required."),Promise.reject(new Error("CKEditor selector is required.")))},initPro:function(selector){return selector?new Promise((resolve,reject)=>{ClassicEditor.create(document.querySelector(selector),{language:{ui:window.language,content:window.language},toolbar:{items:["heading","bold","italic","strikethrough","underline","bulletedList","numberedList","todoList","fontSize","fontColor","fontBackgroundColor","highlight","alignment","link","insertTable","horizontalLine"],shouldNotGroupWhenFull:!1},htmlSupport:{allow:[{name:/.*/,attributes:!0,classes:!0,styles:!0}]},list:{properties:{styles:!0,startIndex:!0,reversed:!0}},heading:{options:[{model:"paragraph",title:"Paragraph","class":"ck-heading_paragraph"},{model:"heading1",view:"h1",title:"Heading 1","class":"ck-heading_heading1"},{model:"heading2",view:"h2",title:"Heading 2","class":"ck-heading_heading2"},{model:"heading3",view:"h3",title:"Heading 3","class":"ck-heading_heading3"},{model:"heading4",view:"h4",title:"Heading 4","class":"ck-heading_heading4"},{model:"heading5",view:"h5",title:"Heading 5","class":"ck-heading_heading5"},{model:"heading6",view:"h6",title:"Heading 6","class":"ck-heading_heading6"}]},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0},placeholder:"",link:{decorators:{addTargetToExternalLinks:!0,defaultProtocol:"https://",toggleDownloadable:{mode:"manual",label:"Downloadable",attributes:{download:"file"}}}}}).then(editor=>{resolve(editor)}).catch(error=>{console.error("CKEditor initialization error:",error),reject(error)})}):(console.error("CKEditor selector is required."),Promise.reject(new Error("CKEditor selector is required.")))}};export default CKEditorServices;const AppConfig={baseLang:"fa",direction:"",successMessage:"",failMessage:"",forbidenMessage:"",projectId:""},CommonServices={setLogo:function(){var darkmode=localStorage.getItem("darkmode");let updatedLogo=initialLogo;darkmode==="true"&&initialLogo.includes("light")&&(updatedLogo=initialLogo.replace("light","dark"));const logoElement=document.getElementById("site-logo");logoElement&&(logoElement.src=updatedLogo)},setTheme:function(){var darkmode=localStorage.getItem("darkmode");if(darkmode==="true"){document.documentElement.setAttribute("data-color-theme","dark");try{document.getElementById("chbDarkMode").style.display="none";document.getElementById("chbLightMode").style.display="block"}catch(e){}}else{document.documentElement.setAttribute("data-color-theme","");try{document.getElementById("chbLightMode").style.display="none";document.getElementById("chbDarkMode").style.display="block"}catch(e){}}},toggleTheme:function(){const currentTheme=document.documentElement.getAttribute("data-color-theme");if(currentTheme==="dark"){document.documentElement.setAttribute("data-color-theme","");localStorage.setItem("darkmode",!1);try{document.getElementById("chbLightMode").style.display="none";document.getElementById("chbDarkMode").style.display="block"}catch(e){}}else{document.documentElement.setAttribute("data-color-theme","dark");localStorage.setItem("darkmode",!0);try{document.getElementById("chbDarkMode").style.display="none";document.getElementById("chbLightMode").style.display="block"}catch(e){}}this.setLogo()},setLanguage:function(lang){AppConfig.baseLang=lang;lang=="fa"?(AppConfig.successMessage="عملیات با موفقیت انجام شد",AppConfig.failMessage="شکست در انجام عملیات",AppConfig.forbidenMessage="شما مجوز کافی برای انجام این عملیات را ندارید"):lang=="en"?(AppConfig.successMessage="Operation was successful",AppConfig.failMessage="Operation was failed",AppConfig.forbidenMessage="You don't have sufficient permissions to perform this action."):(AppConfig.successMessage="عملیات با موفقیت انجام شد",AppConfig.failMessage="شکست در انجام عملیات",AppConfig.forbidenMessage="شما مجوز کافی برای انجام این عملیات را ندارید")},setDirection:function(direction){AppConfig.direction=direction},setProjectId:function(projectId){AppConfig.projectId=projectId},setAdminActiveMenuItem:function(){var url=window.location.pathname.split("/"),section,sectionElement,parentElement,nextSibling;url.length>=3&&(section=url[3],sectionElement=document.getElementById(section),window.location.pathname.includes("/Sprint/Dashboard/")&&(sectionElement=document.getElementById(url[5])),sectionElement&&(sectionElement.classList.add("active"),parentElement=sectionElement.parentElement,parentElement&&parentElement.classList.contains("nav-item-submenu")&&(parentElement.classList.add("nav-item-expanded","nav-item-open"),nextSibling=sectionElement.nextElementSibling,nextSibling&&nextSibling.classList.add("show"))))},getFormData:function(dom_query){for(var record,out={},s_data=$(dom_query).serializeArray(),i=0;i<s_data.length;i++)record=s_data[i],out[record.name]=record.value;return out},datePicker:function(selector){$(selector).persianDatepicker({initialValue:!1,initialValueType:"persian",format:"YYYY/MM/DD",autoClose:!0,timePicker:{enabled:!1},calendar:{persian:{leapYearMode:"astronomical"}}})},dateTimePicker:function(selector){$(selector).persianDatepicker({initialValue:!1,initialValueType:"persian",format:"YYYY/MM/DD HH:mm",autoClose:!0,calendar:{persian:{leapYearMode:"astronomical"}},timePicker:{enabled:!0,step:1,hour:{enabled:!0,step:1},minute:{enabled:!0,step:1},second:{enabled:!1,step:null},meridian:{enabled:!1}}})},dateRangePickers:function(selectorFrom,selectorTo){let to,from;to=$(selectorTo).persianDatepicker({initialValueType:"persian",initialValue:!1,format:"YYYY/MM/DD",autoClose:!0,toolbox:{enabled:!1},calendar:{persian:{leapYearMode:"astronomical"}},timePicker:{enabled:!1,meridian:{enabled:!1}},onSelect:function(unix){if(to.touched=!0,from&&from.options&&from.options.maxDate!=unix){var cachedValue=from.getState().selected.unixDate;from.options={maxDate:unix};from.touched&&from.setDate(cachedValue)}}});from=$(selectorFrom).persianDatepicker({initialValueType:"persian",initialValue:!1,format:"YYYY/MM/DD",autoClose:!0,toolbox:{enabled:!1},calendar:{persian:{leapYearMode:"astronomical"}},timePicker:{enabled:!1,meridian:{enabled:!1}},onSelect:function(unix){if(from.touched=!0,to&&to.options&&to.options.minDate!=unix){var cachedValue=to.getState().selected.unixDate;to.options={minDate:unix};to.touched&&to.setDate(cachedValue)}}})},dateTimeRangePickers:function(selectorFrom,selectorTo){let to,from;to=$(selectorTo).persianDatepicker({initialValueType:"persian",initialValue:!1,format:"YYYY/MM/DD",autoClose:!0,toolbox:{enabled:!1},calendar:{persian:{leapYearMode:"astronomical"}},timePicker:{enabled:!0,step:1,hour:{enabled:!0,step:1},minute:{enabled:!0,step:1},second:{enabled:!1,step:null},meridian:{enabled:!1}},onSelect:function(unix){if(to.touched=!0,from&&from.options&&from.options.maxDate!=unix){var cachedValue=from.getState().selected.unixDate;from.options={maxDate:unix};from.touched&&from.setDate(cachedValue)}}});from=$(selectorFrom).persianDatepicker({initialValueType:"persian",initialValue:!1,format:"YYYY/MM/DD",autoClose:!0,toolbox:{enabled:!1},calendar:{persian:{leapYearMode:"astronomical"}},timePicker:{enabled:!0,step:1,hour:{enabled:!0,step:1},minute:{enabled:!0,step:1},second:{enabled:!1,step:null},meridian:{enabled:!1}},onSelect:function(unix){if(from.touched=!0,to&&to.options&&to.options.minDate!=unix){var cachedValue=to.getState().selected.unixDate;to.options={minDate:unix};to.touched&&to.setDate(cachedValue)}}})},validateForm:function(form){var val=$(form).validate();return val.form(),val.valid()},getCookie:function(cname){for(var c,name=cname+"=",decodedCookie=decodeURIComponent(document.cookie),ca=decodedCookie.split(";"),i=0;i<ca.length;i++){for(c=ca[i];c.charAt(0)==" ";)c=c.substring(1);if(c.indexOf(name)==0)return c.substring(name.length,c.length)}return""},setCookie:function(cname,cvalue){document.cookie=cname+"="+cvalue+";path=/"},copyToClipboard:function(text){var input=document.createElement("textarea"),result;return input.innerHTML=text,document.body.appendChild(input),input.select(),result=document.execCommand("copy"),document.body.removeChild(input),result}};document.addEventListener("DOMContentLoaded",function(){});document.addEventListener("DOMContentLoaded",function(){const lightModeCheckbox=document.getElementById("chbLightMode");lightModeCheckbox&&lightModeCheckbox.addEventListener("click",function(){CommonServices.toggleTheme()});const darkModeCheckbox=document.getElementById("chbDarkMode");darkModeCheckbox&&darkModeCheckbox.addEventListener("click",function(){CommonServices.toggleTheme()})});const StringExtensions={toEnglishNumber(persianStr){if(persianStr==null||persianStr==="")return"";const numberMap={"۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9"};return Object.keys(numberMap).reduce((current,key)=>current.replace(new RegExp(key,"g"),numberMap[key]),persianStr)},replaceSpace(str,replaceCharacter="_"){return str==null||str===""?"":str.replace(/ /g,replaceCharacter)},replaceUnderline(str,replaceCharacter=" "){return str==null||str===""?"":str.replace(/_/g,replaceCharacter)}};